{{Technical|date=March 2016}}
{{Infobox CPU architecture
| name       = Hexagon
| designer   = [[Qualcomm]]
| bits       = 32-bit
| introduced = 2006 (QDSP6)
| version    = 
| design     = 4-way multithreaded [[VLIW]]
| type       = Register-Register
| encoding   = Fixed 4 byte per instruction, up to 4 instructions in VLIW multiinstruction
| branching  = <!-- Branching evaluation, e.g. Condition register, Condition code, Compare and branch -->
| endianness = <!-- Byte ordering, i.e. Little, Big, Bi -->
| page size  = <!-- Primary size of page, i.e. 4 KiB, 2 MiB, 1 GiB; does not include "huge pages" and other extensions -->
| extensions = <!-- ISA extensions, i.e. MMX, SSE, AltiVec, etc -->
| open       = Proprietary
| registers  = <!-- Number and size of processor registers --> 
| gpr        = 32-bit GPR: 32, can be paired to 64-bit<ref>[https://rpw.io/slides/rpw-pacsec2013-hexagon.pdf Baseband exploitation in 2013: Hexagon challenges] {{webarchive |url=https://web.archive.org/web/20131224103934/https://rpw.io/slides/rpw-pacsec2013-hexagon.pdf |date=December 24, 2013 }} /Ralf-Philipp Weinmann Pacsec 20132013-11-14, Tokyo, Japan: "32-bit unified address space for code and data – Byte addressable; 32 General registers (32-bit) – also usable pairwise: 64-bit register pairs"</ref>
| fpr        = <!-- Number of floating-point registers (and size, if not indicated by bits=) -->
}}
'''Hexagon''' (QDSP6) is the brand for a family of 32-bit multi-threaded [[microarchitecture]]s implementing the same [[instruction set]] for a [[digital signal processor]] (DSP) developed by [[Qualcomm]]. According to 2012 estimation, Qualcomm shipped 1.2 billion DSP [[Semiconductor intellectual property core|cores]] inside its [[System on a chip|system on a chip (SoCs)]] (average 2.3 DSP core per SoC) in 2011 year, and 1.5 billion cores were planned for 2012, making the QDSP6 the most shipped architecture of DSP<ref>Will Strauss, [http://www.fwdconcepts.com/dsp111212.htm Forward Concepts. Wireless/DSP Market Bulletin: Qualcomm Leads in Global DSP Silicon Shipments] {{webarchive |url=https://web.archive.org/web/20130528013532/http://www.fwdconcepts.com/dsp111212.htm |date=May 28, 2013 }} // Forward Concepts: "In calendar year 2011, Qualcomm shipped a reported 521 million MSM chip shipments and we estimate that an average of 2.3 of its DSP cores in each unit resulted in 1.2 billion DSPs shipped in silicon.  This (calendar) year, we estimate that the company will ship an average of 2.4 DSP cores with each (more complex) MSM chip."</ref> ([[CEVA, Inc.|CEVA]] had around 1 billion of DSP cores shipped in 2011 with 90% of IP-licenseable DSP market<ref>[http://www.prnewswire.com/news-releases/ceva-continues-to-dominate-dsp-ip-market-with-90-market-share-151346395.html]; [http://www.semiwiki.com/forum/content/1287-dsp-ip-core-ceva-undisputed-worldwide-leader-70-market-share.html]; [https://archive.today/20130722043806/http://www.eetasia.com/articleLogin.do?artId=8800667242 Ceva grabs 90% of DSP IP market], 2012</ref>).

The Hexagon architecture is designed to deliver performance with low power over a variety of applications.  It has features such as hardware assisted  [[multithreading (computer architecture)|multithreading]], privilege levels, [[VLIW|Very Long Instruction Word (VLIW)]], [[SIMD|Single Instruction, Multiple Data (SIMD)]],<ref>Hexagon v2 Programmers Reference</ref><ref name=hotchip14>{{cite web|url=http://pages.cs.wisc.edu/~danav/pubs/qcom/hexagon_micro2014_v6.pdf|title=HEXAGON DSP: AN ARCHITECTURE OPTIMIZED FOR MOBILE MULTIMEDIA AND COMMUNICATIONS|date=March–April 2014|author=Lucian Codrescu (Qualcomm)|publisher= IEEE Micro 34.2|pages=34-43}}</ref> and instructions geared toward efficient signal processing. The CPU is capable of in-order dispatching up to 4 instructions (the packet) to 4 [[Execution unit|Execution Unit]]s every clock.<ref>{{cite web|url=http://landley.net/notes.html |title=Rob Landley's Blog Thing for 2012 |publisher=Landley.net |date= |accessdate=2012-10-19}}</ref><ref name="ll-simp0">[http://llvm.org/devmtg/2011-11/Simpson_PortingLLVMToADSP.pdf Porting LLVM to a Next Generation DSP], L. Taylor Simpson (Qualcomm) // LLVM Developers’ Meeting: 11/18/2011</ref> Hardware multithreading is implemented as [[Barrel processor|barrel]] [[temporal multithreading]] - threads are switched in round-robin fashion each cycle, so the 600&nbsp;MHz physical core is presented as three logical 200&nbsp;MHz cores before V5.<ref>[http://eprint.iacr.org/2013/428.pdf Faster 128-EEA3 and 128-EIA3 Software], Roberto Avanzi and Billy Bob Brumley (Qualcomm Research), Cryptology ePrint Archive: Report 2013/428, 2 Jul 2013. Page 9.</ref><ref name=hotchip13/> Hexagon V5 switched to dynamic multithreading (DMT) with [[Context switch#LATENCY|thread switch]] on L2 misses, interrupt waiting or on special instructions.<ref name=hotchip13/><ref name=mprv5-2013>[http://pages.cs.wisc.edu/~danav/pubs/qcom/hexagon_microreport2013_v5.pdf Qualcomm Extends Hexagon DSP: Hexagon v5 Adds Floating-Point Math, Dynamic Multithreading] // Linley Gwennap, Microprocessor Report, August 2013</ref>

At Hot Chips 2013 Qualcomm announced details of their Hexagon 680 DSP. Qualcomm announced Hexagon Vector Extensions (HVX). HVX is designed to allow significant compute workloads for advanced imaging and computer vision to be processed on the DSP instead of the CPU.<ref>{{Cite web|url=https://www.anandtech.com/show/9552/qualcomm-details-hexagon-680-dsp-in-snapdragon-820-accelerated-imaging|title=Qualcomm Details Hexagon 680 DSP in Snapdragon 820: Accelerated Imaging|last=Ho|first=Joshua|website=www.anandtech.com|access-date=2019-05-12}}</ref> In March 2015 Qualcomm announced their Snapdragon Neural Processing Engine SDK which allow [[AI accelerator|AI acceleration]] using the CPU, GPU and Hexagon DSP.<ref>{{Cite web|url=https://developer.qualcomm.com/blog/device-ai-qualcomm-snapdragon-neural-processing-engine-sdk|title=On-Device AI with Qualcomm Snapdragon Neural Processing Engine SDK|website=Qualcomm Developer Network|language=en|access-date=2019-05-12}}</ref>

[[Qualcomm]]'s [[List of Qualcomm Snapdragon systems-on-chip|Snapdragon 855]] contains their 4th generation on-device AI engine, which includes the Hexagon 690 DSP and Hexagon Tensor Accelerator (HTA) for [[AI accelerator|AI acceleration]].<ref>{{Cite web|url=https://www.qualcomm.com/news/releases/2019/02/25/artificial-intelligence-engine-qualcomm-snapdragon-855-mobile-platform|title=Artificial Intelligence Engine in Qualcomm Snapdragon 855 Mobile Platform Powers On-Device AI User Experiences in Flagship Premium-Tier Smartphones|date=2019-02-24|website=Qualcomm|language=en|access-date=2019-05-12}}</ref>

== Software support ==
=== Operating systems ===
The [[porting|port]] of [[Linux]] for Hexagon runs under a [[hypervisor]] layer ("Hexagon Virtual Machine"<ref>https://developer.qualcomm.com/download/80-nb419-3ahexagonvirtualmachinespec.pdf{{dead link|date=July 2016 |bot=InternetArchiveBot |fix-attempted=yes }} (restricted access)</ref>) and was merged with the 3.2 release of the [[kernel (operating system)|kernel]].<ref>{{cite web|url=https://lwn.net/Articles/465066/|title=3.2 merge window, part 1|publisher=[[lwn.net]]|accessdate=2012-10-19}}</ref><ref>[http://kernelnewbies.org/Linux_3.2#head-2acfe3ee1657c9c2647e5bb5d10e4f511f7527d8 Linux Kernel 3.2 Release Notes] "1.4. New architecture: Hexagon"</ref> The original hypervisor is closed-source, and in April 2013 a minimal open-source hypervisor implementation for QDSP6 V2 and V3, the "Hexagon MiniVM" was released by Qualcomm under a [[BSD-style license]].<ref>Richard Kuo, [http://permalink.gmane.org/gmane.linux.ports.hexagon/553 Hexagon MiniVM] // linux.ports.hexagon, 25 Apr 2013</ref><ref>[https://www.codeaurora.org/projects/all-active-projects/hexagon-minivm Hexagon MiniVM] // CodeAurora (Qualcomm)</ref>

=== Compilers ===
Support for Hexagon was added in 3.1 release of [[LLVM]] by Tony Linthicum.<ref>{{cite web|url=http://llvm.org/releases/3.1/docs/ReleaseNotes.html |title=LLVM 3.1 Release Notes |publisher=Llvm.org |date=2012-05-15 |accessdate=2012-10-19}}</ref> Hexagon/HVX V66 ISA support was added in 8.0.0 release of [[LLVM]].<ref>{{cite web|url=https://releases.llvm.org/8.0.0/docs/ReleaseNotes.html |title=LLVM 8.0.0 Release Notes |publisher=Llvm.org |date=2019-03-20 |accessdate=2019-04-03}}</ref> There is also a non-[[Free Software Foundation|FSF]] maintained branch of [[GNU Compiler Collection|GCC]] and [[binutils]].<ref>
{{cite web|title=Hexagon Project Wiki|url=https://www.codeaurora.org/xwiki/bin/Hexagon/|publisher=Codeaurora.org}}
{{cite web|title=Hexagon download|url=https://www.codeaurora.org/patches/quic/hexagon/"}}{{Dead link|date=May 2019 |bot=InternetArchiveBot |fix-attempted=yes }}
</ref>

== Adoption of the SIP block ==
Qualcomm Hexagon DSPs have been available in [[Snapdragon (system on chip)|Qualcomm Snapdragon SoC]] since 2006.<ref name="bsonc">[http://www.brightsideofnews.com/news/2011/10/12/qualcomm-announces-its-2012-superchip-28nm-snapdragon-s4.aspx Qualcomm Announces Its 2012 Superchip: 28nm Snapdragon S4], 10/12/2011 by John Oram. Quote: "Hexagon DSPs have been in Snapdragon chips since 2006."</ref><ref name="bdti-inside12">[http://www.bdti.com/InsideDSP/2012/06/21/Qualcomm QDSP6 V4: Qualcomm Gives Customers and Developers Programming Access to its DSP Core] // InsideDSP, June 22, 2012</ref> In Snapdragon S4 (MSM8960 and newer) there are three QDSP cores, two in  the Modem subsystem and one Hexagon core in the Multimedia subsystem. Modem cores are programmed by Qualcomm only, and only Multimedia core is allowed to be programmed by user.

They are also used in some [[femtocell]] processors of Qualcomm, including FSM98xx, FSM99xx and FSM90xx.<ref>[http://www.linleygroup.com/newsletters/newsletter_detail.php?num=4761 Qualcomm Aims Hexagon at Femtocells],  October 31, 2011. Linley Gwennap// Linley WIRE</ref>

==Third party integration==
In March 2016, it was announced that semiconductor company [[Conexant]]'s AudioSmart audio processing software was being integrated into Qualcomm's Hexagon.<ref>{{cite web|url=http://www.speechtechmag.com/Articles/News/Speech-Technology-Digest/Qualcomm-to-Integrate-Conexant-AudioSmart-into-Hexagon-DSPs-109538.aspx |title=Qualcomm to Integrate Conexant AudioSmart into Hexagon DSPs |publisher=Speech Tech Magazine |date=2016-03-01 |accessdate=2016-03-11}}</ref>

== Versions ==
There are six versions of QDSP6 architecture released: V1 (2006), V2 (2007–2008), V3 (2009), V4 (2010–2011), QDSP6 V5 (2013, in Snapdragon 800<ref>[http://www.qualcomm.com/media/releases/2013/01/07/qualcomm-announces-next-generation-snapdragon-premium-mobile-processors Qualcomm Announces Next Generation Snapdragon Premium Mobile Processors ]// Qualcomm, January 07, 2013</ref>); and QDSP6 V6 (2016, in Snapdragon 820).<ref name="bdti-inside12"/> V4 has 20 DMIPS per milliwatt, operating at 500&nbsp;MHz.<ref name="bsonc"/><ref name="bdti-inside12"/>
Clock speed of Hexagon varies in 400–2000&nbsp;MHz for QDSP6 and in 256–350&nbsp;MHz for previous generation of the architecture, the QDSP5.<ref name="specs2012-07">{{cite web|url=http://www.qualcomm.com/sites/default/files/common/snapdragon-specs-06.07.12.pdf|title=List of Snapdragon SoCs|publisher=Developer.qualcomm.com|accessdate=2012-10-19|archive-url=https://web.archive.org/web/20121026013025/http://www.qualcomm.com/sites/default/files/common/snapdragon-specs-06.07.12.pdf|archive-date=2012-10-26|url-status=dead}}</ref>

{| class="wikitable" border="1"
|-
! Versions of QDSP6
! Process node, nm
! Date<ref name=hotchip13/>
! Number of simultaneous threads
! Per-thread clock, MHz
! Total core clock, MHz
|-
| QDSP6 V1 || 65<ref name=hotchip13>{{cite web|url=http://pages.cs.wisc.edu/~danav/pubs/qcom/hexagon_hotchips2013.pdf|title=Qualcomm Hexagon DSP: An architecture optimized for mobile multimedia and communications|author=Lucian Codrescu (Qualcomm)|publisher=Hot Chips 25|place=Palo Alto, CA|date=August 2013}}</ref> || Oct 2006 || || ||
|-
| QDSP6 V2<ref name="bdti-v4-test-2013-02">[http://www.bdti.com/InsideDSP/2013/02/13/Qualcomm QDSP6 V4: BDTI Benchmark Results and Implementation Details Of Qualcomm's DSP Core] // BDTI, February 12, 2013</ref> || 65 || Dec 2007<ref name=hotchip13/> || 6 || 100 || 600
|-
| QDSP6 V3 (1st gen)<ref name="bdti-v4-test-2013-02"/> || 45 || 2009|| 6 || 67 || 400
|-
| QDSP6 V3 (2nd gen)<ref name="bdti-v4-test-2013-02"/> || 45 || 2009 || 4 || 100 || 400
|-
| QDSP6 V4<ref name="bdti-v4-test-2013-02"/> (V4M, V4C, V4L<ref name=hotchip13/>) || 28 || 2010–2011 || 3<ref name=mprv5-2013/> || 167 || 500
|-
| QDSP6 V5<ref name="bdti-v5-2013-06">[http://www.bdti.com/InsideDSP/2013/06/13/Qualcomm Qualcomm's QDSP6 v5: Benchmarking Results Confirm That Floating-Point Support Has Arrived] // BDTI, June 12, 2013</ref> (V5A, V5H<ref name=hotchip13/>) || 28 || 2013 || 3<ref name=hotchip13/> || 200 or greater with DMT<ref name=mprv5-2013/> || 600
|-
| QDSP6 V6 68X<ref name="bdti-v6-2015-09">[http://www.bdti.com/insidedsp/2015/09/30/qualcomm Qualcomm's QDSP6 v6: Imaging and Vision Enhancements Via Vector Extensions] // BDTI, September 29, 2015</ref>|| 14/10 || 2016-2018 || 4 || 500 || 2000
|}

== Availability in Snapdragon products ==
Both Hexagon (QDSP6) and pre-Hexagon (QDSP5) cores are used in modern Qualcomm SoCs, QDSP5 mostly in low-end products. Modem QDSPs (often pre-Hexagon) are not shown in the table.

QDSP5 usage:

{| class="wikitable" border="1"
|-
! Snapdragon generation
! Chipset (SoC) ID
! DSP Generation
! DSP Frequency, MHz
! Process node, nm
|-
| S1<ref name="specs2012-07"/>|| MSM7627, MSM7227, MSM7625, MSM7225 || QDSP5 || 320 || 65
|-
| S1<ref name="specs2012-07"/>|| MSM7627A, MSM7227A, MSM7625A, MSM7225A || QDSP5 || 350 || 45
|-
| S2<ref name="specs2012-07"/>|| MSM8655, MSM8255, APQ8055, MSM7630, MSM7230 || QDSP5 || 256 || 45
|-
| S4 Play<ref name="specs2012-07"/> || MSM8625, MSM8225 || QDSP5 || 350 || 45
|-
| S200<ref name="qualcomm-x00-2013">[http://www.qualcomm.com/snapdragon/processors/800-600-400-200/specs Snapdragon 800, 600, 400, 200 Processor Specs] // Qualcomm</ref> || 8110, 8210, 8610, 8112, 8212, 8612, 8225Q, 8625Q || QDSP5 || 384 || 45 LP
|}

QDSP6 (Hexagon) usage:

{| class="wikitable" border="1"
|-
! Snapdragon generation
! Chipset (SoC) ID
! QDSP6 version
! DSP Frequency, MHz
! Process node, nm
|-
| S1<ref name="specs2012-07"/>|| QSD8650, QSD8250 || QDSP6 || 600 || 65
|-
| S3<ref name="specs2012-07"/>|| MSM8660, MSM8260, APQ8060 || QDSP6  (V3?)|| 400 || 45
|-
| S4 Prime<ref name="specs2012-07"/>|| MPQ8064 || QDSP6 (V3?)|| 500 || 28
|-
| S4 Pro<ref name="specs2012-07"/>|| MSM8960 Pro, APQ8064 || QDSP6 (V3?)|| 500 || 28
|-
| S4 Plus<ref name="specs2012-07"/>|| MSM8960, MSM8660A, MSM8260A, APQ8060A, MSM8930,<br> MSM8630, MSM8230, APQ8030, MSM8627, MSM8227 || QDSP6 (V3?) || 500 || 28
|- 
| S400<ref name="qualcomm-x00-2013"/> || 8926, 8930, 8230, 8630, 8930AB, 8230AB, 8630AB, 8030AB, 8226, 8626 || QDSP6V4 || 500 || 28 LP
|-
| S600<ref name="qualcomm-x00-2013"/> || 8064T, 8064M || QDSP6V4 || 500 || 28 LP
|-
| S800<ref name="qualcomm-x00-2013"/> || 8974, 8274, 8674, 8074 || QDSP6V5A || 600 || 28 HPm
|-
| S820<ref name="bdti-v6-2015-09"/> || 8996 || QDSP6V6 || 2000 || 14 FinFet LPP
|}

==Code sample==
This is a single instruction packet from the inner loop of a [[Fast Fourier transform|FFT]]:<ref name="ll-simp0"/><ref name=mprv5-2013/>
<pre>{ R17:16 = MEMD(R0++M1)
  MEMD(R6++M1) = R25:24
  R20 = CMPY(R20, R8):<<1:rnd:sat
  R11:10 = VADDH(R11:10, R13:12)
}:endloop0
</pre>

This packet is claimed by Qualcomm to be equal to 29 classic RISC operations; it includes vector add (4x 16-bit), complex multiply operation and hardware loop support. All instructions of the packet are done in the same cycle.

== See also ==
* [[Texas Instruments TMS320]]
* [[CEVA, Inc.]]
* [[Super Harvard Architecture Single-Chip Computer|SHARC]]

==References==
{{Reflist|30em}}

==External links==
* [https://developer.qualcomm.com/hexagon-processor Qualcomm's Hexagon home page]
* [https://lwn.net/Articles/457635/ Upcoming DSP architectures], Arnd Bergmann // LWN
* [https://web.archive.org/web/20150114212717/https://developer.qualcomm.com/sites/default/files/qualcomm-dsp-access-program.pdf Introduction to Qualcomm’s QDSP Access Program] // Qualcomm, 2011
* [http://pages.cs.wisc.edu/~danav/pubs/qcom/hexagon_hotchips2013.pdf Qualcomm Hexagon DSP: An architecture optimized for mobile multimedia and communications] // Lucian Codrescu (Qualcomm), Hot Chips 25, Palo Alto, CA, August 2013.
* [http://pages.cs.wisc.edu/~danav/pubs/qcom/hexagon_microreport2013_v5.pdf Qualcomm Extends Hexagon DSP: Hexagon v5 Adds Floating-Point Math, Dynamic Multithreading] // Linley Gwennap, Microprocessor Report, August 2013.

[[Category:Digital signal processors]]
[[Category:Instruction set architectures]]
[[Category:Qualcomm IP cores]]
[[Category:Very long instruction word computing]]